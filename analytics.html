<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>MarketSync - Аналитика</title>
</head>
<body>
  <div class="sidebar">
    <div class="logo">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--primary);">
        <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
        <polyline points="2 17 12 22 22 17"></polyline>
        <polyline points="2 12 12 17 22 12"></polyline>
      </svg>
      <h1>MarketSync</h1>
    </div>
    <ul class="nav-menu">
      <li>
        <a href="/marketplace-mvp-ui.html">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="3" width="7" height="7"></rect>
            <rect x="14" y="3" width="7" height="7"></rect>
            <rect x="14" y="14" width="7" height="7"></rect>
            <rect x="3" y="14" width="7" height="7"></rect>
          </svg>
          <span>Дашборд</span>
        </a>
      </li>
      <li>
        <a href="/products.html">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
            <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
            <line x1="12" y1="22.08" x2="12" y2="12"></line>
          </svg>
          <span>Товары</span>
        </a>
      </li>
      <li>
        <a href="/orders.html">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="9" cy="21" r="1"></circle>
            <circle cx="20" cy="21" r="1"></circle>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
          </svg>
          <span>Заказы</span>
        </a>
      </li>
      <li>
        <a href="/analytics.html" class="active">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="20" x2="12" y2="10"></line>
            <line x1="18" y1="20" x2="18" y2="4"></line>
            <line x1="6" y1="20" x2="6" y2="16"></line>
          </svg>
          <span>Аналитика</span>
        </a>
      </li>
      <li>
        <a href="/stock.html">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
            <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
          </svg>
          <span>Остатки</span>
        </a>
      </li>
      <li>
        <a href="/clients.html">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
          <span>Клиенты</span>
        </a>
      </li>
      <li>
        <a href="#">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
          </svg>
          <span>Настройки</span>
        </a>
      </li>
    </ul>
  </div>

  <div class="top-bar">
    <div class="breadcrumb">
      <span>Главная</span>
      <h2>/ Аналитика</h2>
    </div>
  </div>

  <div class="main-content">
    <div class="chart-container">
      <div class="chart-header">
        <h3>Продажи по маркетплейсам</h3>
        <div class="chart-tabs">
          <button class="chart-btn active" data-range="week">Неделя</button>
          <button class="chart-btn" data-range="month">Месяц</button>
          <button class="chart-btn" data-range="year">Год</button>
        </div>
      </div>
      <div class="filter-tabs">
        <label for="marketplace-select">Маркетплейс: </label>
        <select id="marketplace-select">
          <option value="all">Все</option>
          <option value="wb">Wildberries</option>
          <option value="ozon">Ozon</option>
          <option value="ym">Яндекс.Маркет</option>
        </select>
      </div>
      <div class="chart" id="sales-chart"></div>

      <div class="pie-chart"></div>
      <div class="pie-labels">
        <span class="wb">Wildberries</span>
        <span class="ozon">Ozon</span>
        <span class="ym">Яндекс.Маркет</span>
      </div>
    </div>
  </div>

  <script>
    const chart = document.getElementById("sales-chart");
    const select = document.getElementById("marketplace-select");

    const fullData = {
      week: {
        all: [150, 180, 120, 200, 220, 170, 80],
        wb: [60, 80, 40, 90, 100, 70, 30],
        ozon: [50, 60, 50, 70, 80, 60, 20],
        ym: [40, 40, 30, 40, 40, 40, 30]
      },
      month: {
        all: Array.from({ length: 31 }, (_, i) => Math.floor(400 + Math.random() * 300)),
        wb: Array.from({ length: 31 }, () => Math.floor(180 + Math.random() * 150)),
        ozon: Array.from({ length: 31 }, () => Math.floor(120 + Math.random() * 130)),
        ym: Array.from({ length: 31 }, () => Math.floor(100 + Math.random() * 90))
      },
      year: {
        all: [3200, 2900, 4100, 3900, 4700, 5200, 4900, 4500, 5100, 4800, 5300, 6000],
        wb:   [1400, 1300, 1800, 1700, 2000, 2300, 2100, 1900, 2100, 2000, 2300, 2700],
        ozon: [1100, 1000, 1300, 1200, 1500, 1700, 1600, 1500, 1700, 1600, 1800, 2000],
        ym:   [700, 600, 1000, 1000, 1200, 1200, 1200, 1100, 1300, 1200, 1200, 1300]
      }
    };

    const labels = {
      week: ["Пн", "Вт", "Ср", "Чт", "Пт", "Сб", "Вс"],
      month: Array.from({ length: 31 }, (_, i) => (i + 1).toString()),
      year: ["Янв", "Фев", "Мар", "Апр", "Май", "Июн", "Июл", "Авг", "Сен", "Окт", "Ноя", "Дек"]
    };

    let currentRange = 'week';

    function renderBars(data, labelSet) {
  chart.innerHTML = data.map((value, i) => `
    <div class="bar" style="height: 250px; position: relative;">
      <div class="bar-label" style="position: absolute; top: -20px; left: 50%; transform: translateX(-50%); font-size: 12px;">${labelSet[i]}</div>
      <div class="bar-fill" style="height: ${value / Math.max(...data) * 250}px;"></div>
    </div>
  `).join("");
}


    function updateChart() {
      const source = select.value;
      const data = fullData[currentRange][source];
      renderBars(data, labels[currentRange]);
    }

    document.querySelectorAll('.chart-btn').forEach(button => {
      button.addEventListener('click', () => {
        document.querySelectorAll('.chart-btn').forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        currentRange = button.dataset.range;
        updateChart();
      });
    });

    select.addEventListener('change', () => {
      updateChart();
    });

    updateChart();
  </script>
</body>
</html>